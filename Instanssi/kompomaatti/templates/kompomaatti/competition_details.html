{% extends "kompomaatti/event_base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}{{ block.super }} - {{ competition.name }}{% endblock %}

{% block head %}
{{ block.super }}
{% endblock %}

{% block jquery %}
{{ block.super }}
    $(".button").button();
{% endblock %}

{% block crumbs %}
{{ block.super }}
    <li><a href="{% url 'km:competitions' sel_event_id %}">{% trans "Competitions" %}</a></li>
    <li><a href="{% url 'km:competition' sel_event_id competition.id %}">{{ competition.name }}</a></li>
{% endblock %}

{% block content %}
{{ block.super }}
<h2>{{ competition.name }}</h2>
<h3>{% trans "Description" %}</h3>
{{ competition.description|safe }}

<ul>
    <li>{% trans "Participation deadline time" %}: <strong>{{ competition.participation_end_time }}</strong></li>
    <li>{% trans "Competition start time" %}: <strong>{{ competition.start_time }}</strong></li>
</ul>

{% if competition.show_results %}
<h3>{% trans "Results" %}</h3>
<ol>
{% for participant in participants %}
    <li>
        {{ participant.participant_name }}{% if participant.disqualified %} <strong>({% trans "Disqualified" %})</strong>{% else %}, {{ participant.get_formatted_score }}{% endif %}
    </li>
{% endfor %}
</ol>
{% endif %}

{% if user.is_authenticated %}

<h3>{% trans "Participating" %}</h3>
{% if signed_up %}
    <p>
        {% blocktrans %}You are signed up as <strong>{{ participation.participant_name }}</strong>{% endblocktrans %}
    </p>
    {% if can_participate %}
    <a class="button" href="{% url 'km:competition-signout' sel_event_id competition.id %}">{% trans "Remove participation" %}</a>
    {% endif %}
{% else %}
    <p>{% trans "You have not participated yet" %}</p>
    {% if can_participate %}
    {% crispy participationform participationform.helper %}
    {% endif %}
{% endif %}

{% endif %}
{% endblock %}